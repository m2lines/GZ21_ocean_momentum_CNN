# Jupyter notebooks
[gz21-paper-code-zenodo]: https://zenodo.org/record/5076046#.ZF4ulezMLy8
[gz21-paper-agupubs]: https://agupubs.onlinelibrary.wiley.com/doi/10.1029/2021MS002534
These Jupyter notebooks were created & used during original development of the
code and associated paper: [Arthur P. Guillaumin, Laure Zanna (2021).
Stochastic-deep learning parameterization of ocean momentum
forcing][gz21-paper-agupubs]. The exact version of the code used to produce said
paper can be found on [Zenodo][gz21-paper-code-zenodo].

Notebooks require the same dependencies as gz21. Some have extra dependencies,
mostly for visualization. These should be displayed at the top of the notebook.
In particular, the following packages are common between multiple notebooks
(`pip install <pkg>`):

  * `ipympl`
  * `cmocean`

## 2021 paper figures
There are several notebooks which were used to generate the figures in the 2021
paper. These are stored in `paper/`.

`generate-paper-figure-1.ipynb` generates figure 1b. The forcings it uses can be
generated by running the data step with the following configuration:

```
python src/gz21_ocean_momentum/cli/data.py \
--config-file examples/cli-configs/data-paper-fig-1.yaml \
--out-dir tmp/generated/forcings/paper-fig-1
```

`generate-paper-figure-6.ipynb`, which generates figure 6b, requires the above
forcing data, plus another set of forcings generated using the 1% annual CO2
increase CM2.6 dataset. Use `--config-file
examples/cli-configs/data-paper-fig-6-1pct.yaml`.

`test-global.ipynb` generates figures 4, 5 and 7, as well as D4 and D5. For
this, the inference step with the trained neural network has to be run both on
the data with and without `--co2-increase`, and then the notebook needs to be
run once with each set. *(The neural net may be trained only once, on data
without `--co2-increase`.)* The paper figures referring to _piControl_ are those
without `--co2-increase` (the control simulation with pre-industrial CO2
levels), and the figures referring to _1pctCO2_ are those with `--co2-increase`
(a 1% increase per year in CO2 levels for the first 70 years, after which they
remain constant).
